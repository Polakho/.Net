@model List<Gauniv.WebServer.Data.Game>
@using X.PagedList.Mvc.Core;
@using X.PagedList;
@{
    ViewData["Title"] = "Game List";
}

<link href="~/Content/PagedList.css" rel="stylesheet" type="text/css" />
<link href="~/css/gameList.css" rel="stylesheet" type="text/css" />


<h1>Available Games</h1>

<div class="game-filter-section">
    <form method="get" asp-action="Index" class="filter-form">
        <label>Filter by tags:</label>
        <div class="tag-checkboxes">
            @foreach (var local_tag in (List<Gauniv.WebServer.Data.Tags>)ViewData["Tags"])
            {
                var local_selectedTagIds = (int[])ViewData["SelectedTagIds"];
                var local_isChecked = local_selectedTagIds.Contains(local_tag.Id);
                
                <div class="form-check">
                    <input 
                        type="checkbox" 
                        name="tagIds" 
                        value="@local_tag.Id" 
                        id="tag_@local_tag.Id" 
                        class="form-check-input"
                        @(local_isChecked ? "checked" : "")
                    />
                    <label class="form-check-label" for="tag_@local_tag.Id">
                        @local_tag.Name
                    </label>
                </div>
            }
        </div>
        <button type="submit" class="btn btn-primary">Filter</button>
        <a href="@Url.Action("Index")" class="btn btn-secondary">Reset</a>
    </form>
</div>

<div class="games-container">
@foreach (var item in Model) {
    <a asp-action="Details" asp-route-id="@item.Id" class="game-card-link">
        <div class="game-card">
            <div class="game-image-placeholder">
                <img src="@item.ImagePath" alt="@item.Name" class="game-image" />
            </div>
            <div class="game-info">
                <h3>@item.Name</h3>
                <p class="game-price">@item.Price €</p>
            </div>
        </div>
    </a>
}
</div>